var m=function a(n,t){function ct(n){r=n.document;s=n.location;dt=n.cancelAnimationFrame||n.clearTimeout;nt=n.requestAnimationFrame||n.setTimeout}function i(){var n,t=[].slice.call(arguments),o=!(null==t[1]||u.call(t[1])!==a||"tag"in t[1]||"subtree"in t[1]),f=o?t[1]:{},l="class"in f?"class":"className",i={tag:"div",attrs:{}},s=[],e,c,r;if(u.call(t[0])!=p)throw new Error("selector in m(selector, attrs, children) should be a string");for(;n=ai.exec(t[0]);)""===n[1]&&n[2]?i.tag=n[2]:"#"===n[1]?i.attrs.id=n[2]:"."===n[1]?s.push(n[2]):"["===n[3][0]&&(e=vi.exec(n[3]),i.attrs[e[1]]=e[3]||(e[2]?"":!0));s.length>0&&(i.attrs[l]=s.join(" "));c=o?t[2]:t[1];i.children=u.call(c)===h?c:t.slice(o?2:1);for(r in f)i.attrs[r]=r===l?(i.attrs[r]||"")+" "+f[r]:f[r];return i}function d(n,i,e,s,c,l,v,y,w,b,k){var ii,ot,ct,yt,at,bt,kt,st,dt,hi,vt,nt,ci,ft,ut,g,gt,ni,tt,ti,ai,vi,it;if((null==c||null==c.toString())&&(c=""),"retain"===c.subtree)return l;if(ii=u.call(l),ot=u.call(c),(null==l||ii!==ot)&&(null!=l&&(e&&e.nodes?(ct=y-s,yt=ct+(ot===h?c:l.nodes).length,o(e.nodes.slice(ct,yt),e.slice(ct,yt))):l.nodes&&o(l.nodes,l)),l=new c.constructor,l.tag&&(l={}),l.nodes=[]),ot===h){for(g=0,ut=c.length;ut>g;g++)u.call(c[g])===h&&(c=c.concat.apply([],c),g--);for(var it=[],ri=l.length===c.length,pt=0,fi=1,ei=2,oi=3,et={},wt=[],si=!1,g=0;g<l.length;g++)l[g]&&l[g].attrs&&null!=l[g].attrs.key&&(si=!0,et[l[g].attrs.key]={action:fi,index:g});if(si){if(c.indexOf(null)>-1&&(c=c.filter(function(n){return null!=n})),at=!1,c.length!=l.length)at=!0;else for(g=0;bt=l[g],kt=c[g];g++)if(bt.attrs&&kt.attrs&&bt.attrs.key!=kt.attrs.key){at=!0;break}if(at){for(g=0,ut=c.length;ut>g;g++)c[g]&&c[g].attrs&&(null!=c[g].attrs.key?(st=c[g].attrs.key,et[st]=et[st]?{action:oi,index:g,from:et[st].index,element:n.childNodes[et[st].index]||r.createElement("div")}:{action:ei,index:g}):wt.push({index:g,element:n.childNodes[g]||r.createElement("div")}));dt=[];for(hi in et)dt.push(et[hi]);for(var nt,pi=dt.sort(ui),ht=new Array(l.length),g=0;nt=pi[g];g++)(nt.action===fi&&(o(l[nt.index].nodes,l[nt.index]),ht.splice(nt.index,1)),nt.action===ei)&&(vt=r.createElement("div"),vt.key=c[nt.index].attrs.key,n.insertBefore(vt,n.childNodes[nt.index]||null),ht.splice(nt.index,0,{attrs:{key:c[nt.index].attrs.key},nodes:[vt]})),nt.action===oi&&(n.childNodes[nt.index]!==nt.element&&null!==nt.element&&n.insertBefore(nt.element,n.childNodes[nt.index]||null),ht[nt.index]=l[nt.from]);for(g=0,ut=wt.length;ut>g;g++)nt=wt[g],n.insertBefore(nt.element,n.childNodes[nt.index]||null),ht[nt.index]=l[nt.index];for(l=ht,l.nodes=new Array(n.childNodes.length),g=0;ci=n.childNodes[g];g++)l.nodes[g]=ci}}for(var g=0,li=0,ut=c.length;ut>g;g++)ft=d(n,i,l,y,c[g],l[li],v,y+pt||pt,w,b,k),ft!==t&&(ft.nodes.intact||(ri=!1),pt+=ft.$trusted?(ft.match(/<[^\/]|\>\s*[^<]/g)||[]).length:u.call(ft)===h?ft.length:1,l[li++]=ft);if(!ri){for(g=0,ut=c.length;ut>g;g++)null!=l[g]&&it.push.apply(it,l[g].nodes);for(g=0;tt=l.nodes[g];g++)null!=tt.parentNode&&it.indexOf(tt)<0&&o([tt],[l[g]]);c.length<l.length&&(l.length=c.length);l.nodes=it}}else if(null!=c&&ot===a){if(c.attrs||(c.attrs={}),l.attrs||(l.attrs={}),gt=Object.keys(c.attrs),ni=gt.length>("key"in c.attrs?1:0),(c.tag!=l.tag||gt.join()!=Object.keys(l.attrs).join()||c.attrs.id!=l.attrs.id)&&(l.nodes.length&&o(l.nodes),l.configContext&&typeof l.configContext.onunload===f&&l.configContext.onunload()),u.call(c.tag)!=p)return;ti=0===l.nodes.length;(c.attrs.xmlns?b=c.attrs.xmlns:"svg"===c.tag?b="http://www.w3.org/2000/svg":"math"===c.tag&&(b="http://www.w3.org/1998/Math/MathML"),ti?(tt=c.attrs.is?b===t?r.createElement(c.tag,c.attrs.is):r.createElementNS(b,c.tag,c.attrs.is):b===t?r.createElement(c.tag):r.createElementNS(b,c.tag),l={tag:c.tag,attrs:ni?rt(tt,c.tag,c.attrs,{},b):c.attrs,children:null!=c.children&&c.children.length>0?d(tt,c.tag,t,t,c.children,l.children,!0,0,c.attrs.contenteditable?tt:w,b,k):c.children,nodes:[tt]},l.children&&!l.children.nodes&&(l.children.nodes=[]),"select"===c.tag&&c.attrs.value&&rt(tt,c.tag,{value:c.attrs.value},{},b),n.insertBefore(tt,n.childNodes[y]||null)):(tt=l.nodes[0],ni&&rt(tt,c.tag,c.attrs,l.attrs,b),l.children=d(tt,c.tag,t,t,c.children,l.children,!1,0,c.attrs.contenteditable?tt:w,b,k),l.nodes.intact=!0,v===!0&&null!=tt&&n.insertBefore(tt,n.childNodes[y]||null)),typeof c.attrs.config===f)&&(ai=l.configContext=l.configContext||{},vi=function(n,t){return function(){return n.attrs.config.apply(n,t)}},k.push(vi(c,[tt,!ti,ai,l])))}else typeof ot!=f&&(0===l.nodes.length?(c.$trusted?it=lt(n,y,c):(it=[r.createTextNode(c)],n.nodeName.match(yi)||n.insertBefore(it[0],n.childNodes[y]||null)),l="string number boolean".indexOf(typeof c)>-1?new c.constructor(c):c,l.nodes=it):l.valueOf()!==c.valueOf()||v===!0?(it=l.nodes,w&&w===r.activeElement||(c.$trusted?(o(it,l),it=lt(n,y,c)):"textarea"===i?n.value=c:w?w.innerHTML=c:((1===it[0].nodeType||it.length>1)&&(o(l.nodes,l),it=[r.createTextNode(c)]),n.insertBefore(it[0],n.childNodes[y]||null),it[0].nodeValue=c)),l=new c.constructor(c),l.nodes=it):l.nodes.intact=!0);return l}function ui(n,t){return n.action-t.action||n.index-t.index}function rt(n,t,i,r,e){var o,s,c,h;for(o in i)if(s=i[o],c=r[o],o in r&&c===s)"value"===o&&"input"===t&&n.value!=s&&(n.value=s);else{r[o]=s;try{if("config"===o||"key"==o)continue;if(typeof s===f&&0===o.indexOf("on"))n[o]=fi(s,n);else if("style"===o&&null!=s&&u.call(s)===a){for(h in s)(null==c||c[h]!==s[h])&&(n.style[h]=s[h]);for(h in c)h in s||(n.style[h]="")}else null!=e?"href"===o?n.setAttributeNS("http://www.w3.org/1999/xlink","href",s):"className"===o?n.setAttribute("class",s):n.setAttribute(o,s):o in n&&"list"!==o&&"style"!==o&&"form"!==o&&"type"!==o?("input"!==t||n[o]!==s)&&(n[o]=s):n.setAttribute(o,s)}catch(l){if(l.message.indexOf("Invalid argument")<0)throw l;}}return r}function o(n,t){for(var i=n.length-1;i>-1;i--)if(n[i]&&n[i].parentNode){try{n[i].parentNode.removeChild(n[i])}catch(r){}t=[].concat(t);t[i]&&ut(t[i])}0!=n.length&&(n.length=0)}function ut(n){if(n.configContext&&typeof n.configContext.onunload===f&&n.configContext.onunload(),n.children)if(u.call(n.children)===h)for(var t,i=0;t=n.children[i];i++)ut(t);else n.children.tag&&ut(n.children)}function lt(n,t,i){var u=n.childNodes[t],o,f,e;for(u?(o=1!=u.nodeType,f=r.createElement("span"),o?(n.insertBefore(f,u||null),f.insertAdjacentHTML("beforebegin",i),n.removeChild(f)):u.insertAdjacentHTML("beforebegin",i)):n.insertAdjacentHTML("beforeend",i),e=[];n.childNodes[t]!==u;)e.push(n.childNodes[t]),t++;return e}function fi(n,t){return function(r){r=r||event;i.redraw.strategy("diff");i.startComputation();try{return n.call(t,r)}finally{ht()}}}function at(n){var t=ni.indexOf(n);return 0>t?ni.push(n)-1:t}function ei(n){var t=function(){return arguments.length&&(n=arguments[0]),n};return t.toJSON=function(){return n},t}function vt(){for(var t,r="all"===i.redraw.strategy(),n=0;t=tt[n];n++)c[n]&&i.render(t,ii[n].view(c[n]),r);b&&(b(),b=null);l=null;ri=new Date;i.redraw.strategy("diff")}function yt(n){return n.slice(y[i.route.mode].length)}function oi(n,t,r){var f,u,e;k={};f=r.indexOf("?");-1!==f&&(k=ft(r.substr(f+1,r.length)),r=r.substr(0,f));for(u in t){if(u===r)return i.module(n,t[u]),!0;if(e=new RegExp("^"+u.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$"),e.test(r))return r.replace(e,function(){for(var f=u.match(/:[^\/]+/g)||[],e=[].slice.call(arguments,1,-2),r=0,o=f.length;o>r;r++)k[f[r].replace(/:|\./g,"")]=decodeURIComponent(e[r]);i.module(n,t[u])}),!0}}function pt(n){if(n=n||event,!n.ctrlKey&&!n.metaKey&&2!==n.which){n.preventDefault?n.preventDefault():n.returnValue=!1;var t=n.currentTarget||this,r="pathname"===i.route.mode&&t.search?ft(t.search.slice(1)):{};i.route(t[i.route.mode].slice(y[i.route.mode].length),r)}}function wt(){"hash"!=i.route.mode&&s.hash?s.hash=s.hash:n.scrollTo(0,0)}function g(n,t){var e=[],r,f,i;for(r in n)f=t?t+"["+r+"]":r,i=n[r],e.push(null!=i&&u.call(i)===a?g(i,f):encodeURIComponent(f)+"="+encodeURIComponent(i));return e.join("&")}function ft(n){for(var t,r=n.split("&"),u={},i=0,f=r.length;f>i;i++)t=r[i].split("="),u[bt(t[0])]=t[1]?bt(t[1]):"";return u}function bt(n){return decodeURIComponent(n.replace(/\+/g," "))}function si(n){var i=at(n);o(n.childNodes,w[i]);w[i]=t}function et(n){var t=i.prop();return n.then(t),t.then=function(t,i){return et(n.then(t,i))},t}function kt(n,t){function o(n){e=n||p;w.map(function(n){e===v&&n.resolve(r)||n.reject(r)})}function y(n,t,e,o){if((null!=r&&u.call(r)===a||typeof r===f)&&typeof n===f)try{var s=0;n.call(r,function(n){s++||(r=n,t())},function(n){s++||(r=n,e())})}catch(h){i.deferred.onerror(h);r=h;e()}else o()}function s(){var u;try{u=r&&r.then}catch(a){return i.deferred.onerror(a),r=a,e=l,s()}y(u,function(){e=h;s()},function(){e=l;s()},function(){try{e===h&&typeof n===f?r=n(r):e===l&&"function"==typeof t&&(r=t(r),e=h)}catch(s){return i.deferred.onerror(s),r=s,o()}r===c?(r=TypeError(),o()):y(u,function(){o(v)},o,function(){o(e===h&&v)})})}var h=1,l=2,v=3,p=4,c=this,e=0,r=0,w=[];c.promise={};c.resolve=function(n){return e||(r=n,e=h,s()),this};c.reject=function(n){return e||(r=n,e=l,s()),this};c.promise.then=function(n,t){var i=new kt(n,t);return e===v?i.resolve(r):e===p?i.reject(r):w.push(i),i.promise}}function ot(n){return n}function hi(i){var e,c,s,h,o;if(!i.dataType||"jsonp"!==i.dataType.toLowerCase()){if(e=new n.XMLHttpRequest,(e.open(i.method,i.url,!0,i.user,i.password),e.onreadystatechange=function(){4===e.readyState&&(e.status>=200&&e.status<300?i.onload({type:"load",target:e}):i.onerror({type:"error",target:e}))},i.serialize===JSON.stringify&&i.data&&"GET"!==i.method&&e.setRequestHeader("Content-Type","application/json; charset=utf-8"),i.deserialize===JSON.parse&&e.setRequestHeader("Accept","application/json, text/*"),typeof i.config===f)&&(c=i.config(e,i),null!=c&&(e=c)),s="GET"!==i.method&&i.data?i.data:"",s&&u.call(s)!=p&&s.constructor!=n.FormData)throw"Request data should be either be a string or FormData. Check the `serialize` option in `m.request`";return e.send(s),e}h="mithril_callback_"+(new Date).getTime()+"_"+Math.round(1e16*Math.random()).toString(36);o=r.createElement("script");n[h]=function(u){r.body.removeChild(o);i.onload({type:"load",target:{responseText:u}});n[h]=t};o.onerror=function(){return r.body.removeChild(o),i.onerror({type:"error",target:{status:500,responseText:JSON.stringify({error:"Error making jsonp request"})}}),n[h]=t,!1};o.onload=function(){return!1};o.src=i.url+(i.url.indexOf("?")>0?"&":"?")+(i.callbackKey?i.callbackKey:"callback")+"="+h+"&"+g(i.data||{});r.body.appendChild(o)}function ci(n,t,i){if("GET"===n.method&&"jsonp"!=n.dataType){var u=n.url.indexOf("?")<0?"?":"&",r=g(t);n.url=n.url+(r?u+r:"")}else n.data=i(t);return n}function li(n,t){var r=n.match(/:[a-z]\w+/gi),i,u;if(r&&t)for(i=0;i<r.length;i++)u=r[i].slice(1),n=n.replace(r[i],t[u]),delete t[u];return n}var r,s,nt,dt,a="[object Object]",h="[object Array]",p="[object String]",f="function",u={}.toString,ai=/(?:(^|#|\.)([^#\.\[\]]+))|(\[.+?\])/g,vi=/\[(.+?)(?:=("|'|)(.*?)\2)?\]/,yi=/^(AREA|BASE|BR|COL|COMMAND|EMBED|HR|IMG|INPUT|KEYGEN|LINK|META|PARAM|SOURCE|TRACK|WBR)$/,v,ht,k,e,y,it;ct(n);var gt,pi={appendChild:function(n){gt===t&&(gt=r.createElement("html"));r.documentElement&&r.documentElement!==n?r.replaceChild(n,r.documentElement):r.appendChild(n);this.childNodes=r.childNodes},insertBefore:function(n){this.appendChild(n)},childNodes:[]},ni=[],w={};i.render=function(n,i,u){var e=[],f,l;if(!n)throw new Error("Please ensure the DOM element exists before rendering a template into it.");var s=at(n),h=n===r,c=h||n===r.documentElement?pi:n;for(h&&"html"!=i.tag&&(i={tag:"html",attrs:{},children:i}),w[s]===t&&o(c.childNodes),u===!0&&si(n),w[s]=d(c,null,t,t,i,w[s],!1,0,null,t,e),f=0,l=e.length;l>f;f++)e[f]()};i.trust=function(n){return n=new String(n),n.$trusted=!0,n};i.prop=function(n){return(null!=n&&u.call(n)===a||typeof n===f)&&typeof n.then===f?et(n):ei(n)};var ti,tt=[],ii=[],c=[],l=null,ri=0,b=null,st=16;return i.module=function(n,t){var r,u,e,o,s;if(!n)throw new Error("Please ensure the DOM element exists before rendering a template into it.");if(r=tt.indexOf(n),0>r&&(r=tt.length),u=!1,c[r]&&typeof c[r].onunload===f){e={preventDefault:function(){u=!0}};c[r].onunload(e)}if(!u)return i.redraw.strategy("all"),i.startComputation(),tt[r]=n,o=ti=t,s=new t.controller,o===ti&&(c[r]=s,ii[r]=t),ht(),c[r]},i.redraw=function(t){l&&t!==!0?(new Date-ri>st||nt===n.requestAnimationFrame)&&(l>0&&dt(l),l=nt(vt,st)):(vt(),l=nt(function(){l=null},st))},i.redraw.strategy=i.prop(),v=0,i.startComputation=function(){v++},i.endComputation=function(){v=Math.max(v-1,0);0===v&&i.redraw()},ht=function(){"none"==i.redraw.strategy()?(v--,i.redraw.strategy("diff")):i.endComputation()},i.withAttr=function(n,t){return function(i){i=i||event;var r=i.currentTarget||this;t(n in r?r[n]:r.getAttribute(n))}},y={pathname:"",hash:"#",search:"?"},it=function(){},i.route=function(){var o,t,h,c,l,w;if(0===arguments.length)return e;if(3===arguments.length&&u.call(arguments[1])===p){var k=arguments[0],d=arguments[1],nt=arguments[2];it=function(n){var t=e=yt(n);oi(k,nt,t)||i.route(d,!0)};o="hash"===i.route.mode?"onhashchange":"onpopstate";n[o]=function(){e!=yt(s[i.route.mode])&&it(s[i.route.mode])};b=wt;n[o]()}else if(arguments[0].addEventListener)t=arguments[0],arguments[1],arguments[2],t.href=("pathname"!==i.route.mode?s.pathname:"")+y[i.route.mode]+this.attrs.href,t.removeEventListener("click",pt),t.addEventListener("click",pt);else if(u.call(arguments[0])===p){e=arguments[0];var a=arguments[1]||{},f=e.indexOf("?"),v=f>-1?ft(e.slice(f+1)):{};for(h in a)v[h]=a[h];c=g(v);l=f>-1?e.slice(0,f):e;c&&(e=l+(-1===l.indexOf("?")?"?":"&")+c);w=(3===arguments.length?arguments[2]:arguments[1])===!0;n.history.pushState?(b=function(){n.history[w?"replaceState":"pushState"](null,r.title,y[i.route.mode]+e);wt()},it(y[i.route.mode]+e)):s[i.route.mode]=e}},i.route.param=function(n){if(!k)throw new Error("You must call m.route(element, defaultRoute, routes) before calling m.route.param()");return k[n]},i.route.mode="search",i.deferred=function(){var n=new kt;return n.promise=et(n.promise),n},i.deferred.onerror=function(n){if("[object Error]"===u.call(n)&&!n.constructor.toString().match(/ Error/))throw n;},i.sync=function(n){function f(n,t){return function(i){return u[n]=i,t||(e="reject"),0==--o&&(r.promise(u),r[e](u)),i}}var e="resolve",r=i.deferred(),o=n.length,u=new Array(o),t;if(n.length>0)for(t=0;t<n.length;t++)n[t].then(f(t,!0),f(t,!1));else r.resolve([]);return r.promise},i.request=function(n){n.background!==!0&&i.startComputation();var t=i.deferred(),r=n.dataType&&"jsonp"===n.dataType.toLowerCase(),e=n.serialize=r?ot:n.serialize||JSON.stringify,f=n.deserialize=r?ot:n.deserialize||JSON.parse,o=n.extract||function(n){return 0===n.responseText.length&&f===JSON.parse?null:n.responseText};return n.url=li(n.url,n.data),n=ci(n,n.data,e),n.onload=n.onerror=function(r){var c,e,s;try{if(r=r||event,c=("load"===r.type?n.unwrapSuccess:n.unwrapError)||ot,e=c(f(o(r.target,n))),"load"===r.type)if(u.call(e)===h&&n.type)for(s=0;s<e.length;s++)e[s]=new n.type(e[s]);else n.type&&(e=new n.type(e));t["load"===r.type?"resolve":"reject"](e)}catch(r){i.deferred.onerror(r);t.reject(r)}n.background!==!0&&i.endComputation()},hi(n),t.promise(n.initialValue),t.promise},i.deps=function(t){return ct(n=t||n),n},i.deps.factory=a,i}("undefined"!=typeof window?window:{}),Utils,Bootstrap,TodoApp;"undefined"!=typeof module&&null!==module&&module.exports?module.exports=m:"function"==typeof define&&define.amd&&define(function(){return m}),function(n){function i(n,t){var r=[],i=[];return n.forEach(function(u,f){f>0&&f%t==0&&(r.push(i),i=[]);i.push(u);f===n.length-1&&r.push(i)}),r}function t(n,t){for(var r=t.charAt(0),i=n;i&&i!==document;i=i.parentNode)if(r==="."&&i.classList.contains(t.substr(1))||r==="#"&&i.id===t.substr(1)||r==="["&&i.hasAttribute(t.substr(1,t.length-2))||i.tagName.toLowerCase()===t)return i;return null}function r(n,i){return function(r){m.redraw.strategy("none");var u=r.target;i&&(u=t(u,i));u?Velocity(u,{opacity:0},{duration:750,complete:function(){m.startComputation();n();m.endComputation()}}):(m.startComputation(),n(),m.endComputation())}}n.groupSize=i;n.getClosest=t;n.fadesOut=r}(Utils||(Utils={})),function(n){var t;(function(n){function r(n){return n.options.buttons.map(function(t){var i=t.primary?"btn-primary":"btn-default";return m("button.btn."+i+"[type=button]",{onclick:n.close.bind(n,t.id)},t.text)})}function u(n){return n.vm.render?m(".modal.fade"+(n.vm.visible?".in":""),m(".modal-dialog",m(".modal-content",[m(".modal-header",[m("button.close[type=button][aria-label=Close]",{onclick:n.close},m("span[aria-hidden=true]",m.trust("&times;"))),m("h4.modal-title",n.options.title)]),m(".modal-body",n.vm.content()),m(".modal-footer",r(n))]))):null}function f(n){return{controllerFactory:function(){return new t(n)},view:u}}(function(n){n[n.Ok=0]="Ok";n[n.Cancel=1]="Cancel";n[n.Yes=2]="Yes";n[n.No=3]="No";n[n.Apply=4]="Apply";n[n.Save=5]="Save";n[n.Delete=6]="Delete"})(n.Button||(n.Button={}));var e=n.Button,i=function(){function n(){}return n}(),t=function(){function n(n){this.options=n;this.vm=new i;this.close=this.close.bind(this)}return n.prototype.show=function(n){var t=this;return this.dlgResult?this.dlgResult.promise:(m.startComputation(),this.vm.content=n,this.vm.render=!0,this.vm.visible=!1,this.dlgResult=m.deferred(),m.endComputation(),setTimeout(function(){m.startComputation();t.vm.visible=!0;m.endComputation()},10),this.dlgResult.promise)},n.prototype.close=function(n){var t=this;m.startComputation();this.vm.visible=!1;this.dlgResult.resolve(n);this.dlgResult=null;m.endComputation();setTimeout(function(){m.startComputation();t.vm.render=!1;m.endComputation()},250)},n}();n.ModalController=t;n.create=f})(t=n.Modal||(n.Modal={}))}(Bootstrap||(Bootstrap={})),function(n){function f(n){return function(){return m(".confirmDlg",["Are you sure you want to permanently delete this task?",m(".panel.panel-default",m(".panel-body",n))])}}function s(n){return m("form",{onsubmit:n.add},[m(".form-group",m(".form-control-wrapper",[m("input.form-control[type=text]",{placeholder:"What needs to be done?",onkeypress:m.withAttr("value",n.description),value:n.description()}),m("span.material-input")]))])}function h(n,t){return m(".panel.panel-default",{key:t.key},m(".panel-body",[m(".col-xs-2",m(".checkbox",m("label",[m("input[type=checkbox]",{id:"todo_"+t.key,onclick:function(i){t.completed(i.target.checked);n.update(t)},checked:t.completed()}),m("span.ripple"),m("span.check")]))),m(".col-xs-8",m("label.todo",{htmlFor:"todo_"+t.key,style:{textDecoration:t.completed()?"line-through":"none",color:t.completed()?"silver":"inherit"}},t.text())),m(".col-xs-2",m(".icon-close",m("i.mdi-content-clear.close",{onclick:n.remove.bind(n,t.key,t.text())})))]))}function c(n){var t=n.vm,r=t.list.getItems(),u=Utils.groupSize(r,5);return m(".container.todoApp",[m(".row",m(".col-md-4.col-md-offset-4.col-xs-10.col-xs-offset-2",s(t))),m(".row",u.map(function(n){return m(".col-lg-4",n.map(h.bind(undefined,t)))})),i.view(n.dialogController)])}var t=function(){function n(n,t,i){t===void 0&&(t=!1);this.text=m.prop(n);this.completed=m.prop(t);this.key=i}return n.prototype.toObj=function(){return{key:this.key,text:this.text(),completed:this.completed()}},n.fromObj=function(t){return new n(t.text,t.completed,t.key)},n}(),r=function(){function n(){var n=this;this.todos=[];this.firebaseRef=new Firebase("https://hrbo-todo.firebaseio.com/todos/");this.firebaseRef.on("value",function(i){n.todos=[];i.forEach(function(i){n.todos.push(t.fromObj(i.val()))});m.redraw()})}return n.prototype.getItems=function(){return this.todos},n.prototype.push=function(n){var t=this.firebaseRef.push();n.key=t.key();t.set(n.toObj())},n.prototype.remove=function(n){this.firebaseRef.child(n).remove()},n.prototype.update=function(n){this.firebaseRef.child(n.key).update(n.toObj())},n.prototype.unload=function(){this.firebaseRef.off("value");this.firebaseRef=null},n}(),u=Bootstrap.Modal,i=u.create({title:"Delete Task?",buttons:[{text:"Yes",id:2,primary:!0},{text:"No",id:3}]}),e=function(){function n(n,t){this.dialogController=t;this.list=n;this.description=m.prop("");this.add=this.add.bind(this)}return n.prototype.add=function(n){n.preventDefault();this.description()&&(this.list.push(new t(this.description())),this.description(""))},n.prototype.update=function(n){this.list.update(n)},n.prototype.remove=function(n,t){var i=this,r=f(t);this.dialogController.show(r).then(function(t){t===2&&i.list.remove(n)})},n}(),o=function(){function n(){this.store=new r;this.dialogController=i.controllerFactory();this.vm=new e(this.store,this.dialogController)}return n.prototype.onunload=function(){this.store.unload()},n}();n.Module={controller:o,view:c}}(TodoApp||(TodoApp={}));m.module(document.body,TodoApp.Module)